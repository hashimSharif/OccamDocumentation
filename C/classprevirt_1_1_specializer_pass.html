<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.5"/>
<title>Occam - Application Specialization: previrt::SpecializerPass Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">Occam - Application Specialization
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.5 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li class="current"><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="annotated.html"><span>Class&#160;List</span></a></li>
      <li><a href="classes.html"><span>Class&#160;Index</span></a></li>
      <li><a href="hierarchy.html"><span>Class&#160;Hierarchy</span></a></li>
      <li><a href="functions.html"><span>Class&#160;Members</span></a></li>
    </ul>
  </div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Namespaces</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(9)"><span class="SelectionMark">&#160;</span>Friends</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(10)"><span class="SelectionMark">&#160;</span>Macros</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="namespaceprevirt.html">previrt</a></li><li class="navelem"><a class="el" href="classprevirt_1_1_specializer_pass.html">SpecializerPass</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pub-static-attribs">Static Public Attributes</a> &#124;
<a href="#pri-attribs">Private Attributes</a> &#124;
<a href="classprevirt_1_1_specializer_pass-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">previrt::SpecializerPass Class Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p><code>#include &lt;<a class="el" href="_strategy_specializer_8h_source.html">StrategySpecializer.h</a>&gt;</code></p>
<div class="dynheader">
Inheritance diagram for previrt::SpecializerPass:</div>
<div class="dyncontent">
 <div class="center">
  <img src="classprevirt_1_1_specializer_pass.png" usemap="#previrt::SpecializerPass_map" alt=""/>
  <map id="previrt::SpecializerPass_map" name="previrt::SpecializerPass_map">
<area href="classanonymous__namespace_02_strategy_specializer_8cpp_03_1_1_par_eval_opt_pass.html" alt="anonymous_namespace{StrategySpecializer.cpp}::ParEvalOptPass" shape="rect" coords="0,112,388,136"/>
</map>
 </div></div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a5d2e8c964c5f5baf1fa5c0d0317b25ef"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classprevirt_1_1_specializer_pass.html#a5d2e8c964c5f5baf1fa5c0d0317b25ef">SpecializerPass</a> (bool)</td></tr>
<tr class="memdesc:a5d2e8c964c5f5baf1fa5c0d0317b25ef"><td class="mdescLeft">&#160;</td><td class="mdescRight">The constructor takes as input the _opt flag to specify if the FunctionPassManager is to be used to optimize the functions created as a result of partial evaluation.  <a href="#a5d2e8c964c5f5baf1fa5c0d0317b25ef">More...</a><br/></td></tr>
<tr class="separator:a5d2e8c964c5f5baf1fa5c0d0317b25ef"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a71a8f8523d398178b5f2600ee2b15eae"><td class="memItemLeft" align="right" valign="top">virtual&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classprevirt_1_1_specializer_pass.html#a71a8f8523d398178b5f2600ee2b15eae">~SpecializerPass</a> ()</td></tr>
<tr class="separator:a71a8f8523d398178b5f2600ee2b15eae"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a84369844b2c03e5f9beb6dcbdd3e1642"><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classprevirt_1_1_specializer_pass.html#a84369844b2c03e5f9beb6dcbdd3e1642">getAnalysisUsage</a> (llvm::AnalysisUsage &amp;AU) const </td></tr>
<tr class="separator:a84369844b2c03e5f9beb6dcbdd3e1642"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab9bd77742da397edd4dbddac59847ec5"><td class="memItemLeft" align="right" valign="top">virtual bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classprevirt_1_1_specializer_pass.html#ab9bd77742da397edd4dbddac59847ec5">runOnModule</a> (llvm::Module &amp;M)</td></tr>
<tr class="separator:ab9bd77742da397edd4dbddac59847ec5"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-static-attribs"></a>
Static Public Attributes</h2></td></tr>
<tr class="memitem:a2bbd27e9d3d84d6be1e3ff48db11dd6b"><td class="memItemLeft" align="right" valign="top">static char&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classprevirt_1_1_specializer_pass.html#a2bbd27e9d3d84d6be1e3ff48db11dd6b">ID</a></td></tr>
<tr class="separator:a2bbd27e9d3d84d6be1e3ff48db11dd6b"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pri-attribs"></a>
Private Attributes</h2></td></tr>
<tr class="memitem:a39ddd93c571aa23df52cb18b8fd72edc"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classprevirt_1_1_specializer_pass.html#a39ddd93c571aa23df52cb18b8fd72edc">optimize</a></td></tr>
<tr class="memdesc:a39ddd93c571aa23df52cb18b8fd72edc"><td class="mdescLeft">&#160;</td><td class="mdescRight">The optimize flag is set if the Ppeval-opt command line argument is passed as argument to the Pass. If the flag is set the specialized Functions created are optimized using the FunctionPassManager.  <a href="#a39ddd93c571aa23df52cb18b8fd72edc">More...</a><br/></td></tr>
<tr class="separator:a39ddd93c571aa23df52cb18b8fd72edc"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p><a class="el" href="classprevirt_1_1_specializer_pass.html">SpecializerPass</a> is extending the functionality of llvm:: <a class="el" href="class_module_pass.html">ModulePass</a> to implement partial evaluation within a module (intra module specialization). The procedure of partial evaluation involves:</p>
<p>1) Iterating over all the call-sites in all the functions in the Module.</p>
<p>2) Identifying the call-sites that pass constant arguments.</p>
<p>3) Based on the specific usages, specialized versions of functions are created, if they are not found in the <a class="el" href="classprevirt_1_1_specialization_table.html">previrt::SpecializationTable</a></p>
<p>4) The <a class="el" href="classprevirt_1_1_specializer_pass.html#ab9bd77742da397edd4dbddac59847ec5">SpecializerPass::runOnModule</a> routine creates these specialized versions and adds them to the Module</p>
<p>5) The call-sites are replaced by, calls to the specialized version corresponding to the specific usage.</p>
<p><a class="el" href="classprevirt_1_1_specializer_pass.html">SpecializerPass</a> is registered with the internal PassManager database by the name 'Ppeval'. It accepts an optional command line argument 'Ppeval-opt'. If 'Ppeval-opt' is specified, the <a class="el" href="classprevirt_1_1_specializer_pass.html#ab9bd77742da397edd4dbddac59847ec5">SpecializerPass::runOnModule</a> function applies llvm optimization onto the newly created specialized functions. </p>

<p>Definition at line <a class="el" href="_strategy_specializer_8h_source.html#l00068">68</a> of file <a class="el" href="_strategy_specializer_8h_source.html">StrategySpecializer.h</a>.</p>
</div><h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a class="anchor" id="a5d2e8c964c5f5baf1fa5c0d0317b25ef"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">previrt::SpecializerPass::SpecializerPass </td>
          <td>(</td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>_opt</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>The constructor takes as input the _opt flag to specify if the FunctionPassManager is to be used to optimize the functions created as a result of partial evaluation. </p>

<p>Definition at line <a class="el" href="_strategy_specializer_8cpp_source.html#l00328">328</a> of file <a class="el" href="_strategy_specializer_8cpp_source.html">StrategySpecializer.cpp</a>.</p>

</div>
</div>
<a class="anchor" id="a71a8f8523d398178b5f2600ee2b15eae"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">previrt::SpecializerPass::~SpecializerPass </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Default destructor </p>

<p>Definition at line <a class="el" href="_strategy_specializer_8cpp_source.html#l00334">334</a> of file <a class="el" href="_strategy_specializer_8cpp_source.html">StrategySpecializer.cpp</a>.</p>

</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a class="anchor" id="a84369844b2c03e5f9beb6dcbdd3e1642"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void SpecializerPass::getAnalysisUsage </td>
          <td>(</td>
          <td class="paramtype">llvm::AnalysisUsage &amp;&#160;</td>
          <td class="paramname"><em>AU</em></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>The addAnalysisUsage method adds the necessary information required by the passes. For specialization, we require the call graph </p>

<p>Definition at line <a class="el" href="_strategy_specializer_8cpp_source.html#l00317">317</a> of file <a class="el" href="_strategy_specializer_8cpp_source.html">StrategySpecializer.cpp</a>.</p>

</div>
</div>
<a class="anchor" id="ab9bd77742da397edd4dbddac59847ec5"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool SpecializerPass::runOnModule </td>
          <td>(</td>
          <td class="paramtype">llvm::Module &amp;&#160;</td>
          <td class="paramname"><em>M</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>The runOnModule function performs the following set of operations to implement Partial evaluation:</p>
<p>1) Iterates over all of the functions in the module calling trySpecializeFunction(defined in <a class="el" href="_strategy_specializer_8cpp.html">StrategySpecializer.cpp</a> line 72) on each function.</p>
<p>2) The trySpecializeFunction routine analyses all the call-sites in the function. If any call-sites involve constant arguments, a new specialized version of the function is created.</p>
<p>3) Using the cloneFunction routine (llvm), the constants are embedded directly into the body of the specialized version, thereby reducing the arguments to the function.</p>
<p>4) The newly created versions are optimized using FunctionPassManager (llvm), to perform optimizations such as constant folding, hence reducing possible number of control paths.</p>
<p>5) The trySpecializeFunction is called again on the specialized version of the function, as it is likely that the optimized function with constant replacing variables, could lead to further functions that could be specialized.</p>
<p>6) The specialized functions each with a unique name assigned by <a class="el" href="namespaceprevirt.html#ad16a07c95935c6f48867c55642dd1b98">previrt::specializeName</a> are added to the Module.</p>
<p>7) The <a class="el" href="namespaceprevirt.html#a62a70330e4f2b7a0d458f8b44c649b20">previrt::specializeCallSite</a> function is called to replace respective call instructions, with the new call instructions to specialized versions taking fewer arguments. </p>

<p>Definition at line <a class="el" href="_strategy_specializer_8cpp_source.html#l00239">239</a> of file <a class="el" href="_strategy_specializer_8cpp_source.html">StrategySpecializer.cpp</a>.</p>

<p>References <a class="el" href="_strategy_specializer_8cpp_source.html#l00072">trySpecializeFunction()</a>.</p>

</div>
</div>
<h2 class="groupheader">Member Data Documentation</h2>
<a class="anchor" id="a2bbd27e9d3d84d6be1e3ff48db11dd6b"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">char previrt::SpecializerPass::ID</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="_strategy_specializer_8h_source.html#l00076">76</a> of file <a class="el" href="_strategy_specializer_8h_source.html">StrategySpecializer.h</a>.</p>

</div>
</div>
<a class="anchor" id="a39ddd93c571aa23df52cb18b8fd72edc"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool previrt::SpecializerPass::optimize</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>The optimize flag is set if the Ppeval-opt command line argument is passed as argument to the Pass. If the flag is set the specialized Functions created are optimized using the FunctionPassManager. </p>

<p>Definition at line <a class="el" href="_strategy_specializer_8h_source.html#l00073">73</a> of file <a class="el" href="_strategy_specializer_8h_source.html">StrategySpecializer.h</a>.</p>

</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li>C:/Users/Hashim/Dropbox/Occam 2.0/src/<a class="el" href="_strategy_specializer_8h_source.html">StrategySpecializer.h</a></li>
<li>C:/Users/Hashim/Dropbox/Occam 2.0/src/<a class="el" href="_strategy_specializer_8cpp_source.html">StrategySpecializer.cpp</a></li>
</ul>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Fri Sep 27 2013 00:22:30 for Occam - Application Specialization by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.5
</small></address>
</body>
</html>
