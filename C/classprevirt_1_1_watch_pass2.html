<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.5"/>
<title>Occam - Application Specialization: previrt::WatchPass2 Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">Occam - Application Specialization
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.5 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li class="current"><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="annotated.html"><span>Class&#160;List</span></a></li>
      <li><a href="classes.html"><span>Class&#160;Index</span></a></li>
      <li><a href="hierarchy.html"><span>Class&#160;Hierarchy</span></a></li>
      <li><a href="functions.html"><span>Class&#160;Members</span></a></li>
    </ul>
  </div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Namespaces</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(9)"><span class="SelectionMark">&#160;</span>Friends</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(10)"><span class="SelectionMark">&#160;</span>Macros</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="namespaceprevirt.html">previrt</a></li><li class="navelem"><a class="el" href="classprevirt_1_1_watch_pass2.html">WatchPass2</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pub-static-attribs">Static Public Attributes</a> &#124;
<a href="#pri-attribs">Private Attributes</a> &#124;
<a href="classprevirt_1_1_watch_pass2-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">previrt::WatchPass2 Class Reference</div>  </div>
</div><!--header-->
<div class="contents">
<div class="dynheader">
Inheritance diagram for previrt::WatchPass2:</div>
<div class="dyncontent">
 <div class="center">
  <img src="classprevirt_1_1_watch_pass2.png" usemap="#previrt::WatchPass2_map" alt=""/>
  <map id="previrt::WatchPass2_map" name="previrt::WatchPass2_map">
</map>
 </div></div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a3c43d687f4b0e18adf01b8c7b1cdd176"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classprevirt_1_1_watch_pass2.html#a3c43d687f4b0e18adf01b8c7b1cdd176">WatchPass2</a> ()</td></tr>
<tr class="separator:a3c43d687f4b0e18adf01b8c7b1cdd176"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a27ffe6e1a21fc3c3f010550a761865fc"><td class="memItemLeft" align="right" valign="top">virtual&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classprevirt_1_1_watch_pass2.html#a27ffe6e1a21fc3c3f010550a761865fc">~WatchPass2</a> ()</td></tr>
<tr class="memdesc:a27ffe6e1a21fc3c3f010550a761865fc"><td class="mdescLeft">&#160;</td><td class="mdescRight">Default Destructor.  <a href="#a27ffe6e1a21fc3c3f010550a761865fc">More...</a><br/></td></tr>
<tr class="separator:a27ffe6e1a21fc3c3f010550a761865fc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1e590c104d365e4b5636da940ae8195c"><td class="memItemLeft" align="right" valign="top">virtual bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classprevirt_1_1_watch_pass2.html#a1e590c104d365e4b5636da940ae8195c">runOnModule</a> (Module &amp;M)</td></tr>
<tr class="separator:a1e590c104d365e4b5636da940ae8195c"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-static-attribs"></a>
Static Public Attributes</h2></td></tr>
<tr class="memitem:afd52829f3aa30a9a5fb422d1875ae283"><td class="memItemLeft" align="right" valign="top">static char&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classprevirt_1_1_watch_pass2.html#afd52829f3aa30a9a5fb422d1875ae283">ID</a></td></tr>
<tr class="separator:afd52829f3aa30a9a5fb422d1875ae283"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pri-attribs"></a>
Private Attributes</h2></td></tr>
<tr class="memitem:ab4383e2e3ceb8af4d03321bdbbc225cc"><td class="memItemLeft" align="right" valign="top">watch::proto::WatchInterface&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classprevirt_1_1_watch_pass2.html#ab4383e2e3ceb8af4d03321bdbbc225cc">interface</a></td></tr>
<tr class="memdesc:ab4383e2e3ceb8af4d03321bdbbc225cc"><td class="mdescLeft">&#160;</td><td class="mdescRight">The interface is an object that reads in a Google protocol buffer from a file interface defines the actions that need to be applied in order to create watch functions.  <a href="#ab4383e2e3ceb8af4d03321bdbbc225cc">More...</a><br/></td></tr>
<tr class="separator:ab4383e2e3ceb8af4d03321bdbbc225cc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac4a12e033df1a4de537a64d2fe0b3fcd"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classprevirt_1_1_watch_pass2.html#ac4a12e033df1a4de537a64d2fe0b3fcd">fancy</a></td></tr>
<tr class="memdesc:ac4a12e033df1a4de537a64d2fe0b3fcd"><td class="mdescLeft">&#160;</td><td class="mdescRight">If fancy is set; a fancy failure function is created; one that takes the function name and the arguments.  <a href="#ac4a12e033df1a4de537a64d2fe0b3fcd">More...</a><br/></td></tr>
<tr class="separator:ac4a12e033df1a4de537a64d2fe0b3fcd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a364130c83b836fa7353c631719500419"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classprevirt_1_1_watch_pass2.html#a364130c83b836fa7353c631719500419">allowLocal</a></td></tr>
<tr class="memdesc:a364130c83b836fa7353c631719500419"><td class="mdescLeft">&#160;</td><td class="mdescRight">If allowLocal is set, the local calls to the function (that is watched) are allowed.  <a href="#a364130c83b836fa7353c631719500419">More...</a><br/></td></tr>
<tr class="separator:a364130c83b836fa7353c631719500419"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ade9b1f0414c7db1ed5f833c0424e5f69"><td class="memItemLeft" align="right" valign="top">std::string&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classprevirt_1_1_watch_pass2.html#ade9b1f0414c7db1ed5f833c0424e5f69">failureName</a></td></tr>
<tr class="memdesc:ade9b1f0414c7db1ed5f833c0424e5f69"><td class="mdescLeft">&#160;</td><td class="mdescRight">name of failure function; The function called in case the interface is violated  <a href="#ade9b1f0414c7db1ed5f833c0424e5f69">More...</a><br/></td></tr>
<tr class="separator:ade9b1f0414c7db1ed5f833c0424e5f69"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>The <a class="el" href="classprevirt_1_1_watch_pass2.html">WatchPass2</a> Class is registered as a Pass with the PassManager internal database by the name <em>'Pwatch2'</em>. The Pass creates watch functions for functions that are a part of the watch::proto::WatchInterface. It enforces a certain interface as specified in the watch::proto::WatchInterface Google protocol buffer.</p>
<p>The Pass takes four command line arguments. watch::proto::WatchInterface serialized files are passed following the <em>'Pwatch2-input'</em> flag. The <em>'Pwatch2-local'</em> flag if passed, specifies that local calls to the function should be allowed. The <em>'Pwatch2-fail'</em> flag is followed by the name of the failure function, that is called in case the interface is violated. If the <em>'Pwatch2-fail'</em> flag is specified, the failure function is created is a fancy failure function; it takes as argument, the name of the function that violated the interface and the set of arguments. </p>

<p>Definition at line <a class="el" href="_watch2_8cpp_source.html#l00910">910</a> of file <a class="el" href="_watch2_8cpp_source.html">Watch2.cpp</a>.</p>
</div><h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a class="anchor" id="a3c43d687f4b0e18adf01b8c7b1cdd176"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">previrt::WatchPass2::WatchPass2 </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>The constructor initializes the class data members <em>fancy</em>, <em>allowLocal</em>, <em>failureName</em> with the command line arguments specified to the Pass. </p>

<p>Definition at line <a class="el" href="_watch2_8cpp_source.html#l00928">928</a> of file <a class="el" href="_watch2_8cpp_source.html">Watch2.cpp</a>.</p>

<p>References <a class="el" href="namespaceprevirt.html#af853021873573b187ec512afc5b52987">previrt::WatchInput()</a>.</p>

</div>
</div>
<a class="anchor" id="a27ffe6e1a21fc3c3f010550a761865fc"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">virtual previrt::WatchPass2::~WatchPass2 </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Default Destructor. </p>

<p>Definition at line <a class="el" href="_watch2_8cpp_source.html#l00958">958</a> of file <a class="el" href="_watch2_8cpp_source.html">Watch2.cpp</a>.</p>

</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a class="anchor" id="a1e590c104d365e4b5636da940ae8195c"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">virtual bool previrt::WatchPass2::runOnModule </td>
          <td>(</td>
          <td class="paramtype">Module &amp;&#160;</td>
          <td class="paramname"><em>M</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>The runOnModule routine iterates over all of the functions, creating watch functions for the ones specified in the interface, enforcing the interface as specified in the interface object (Google protocol buffer).</p>
<p>The procedure performed by the <a class="el" href="classprevirt_1_1_watch_pass2.html#a1e590c104d365e4b5636da940ae8195c">WatchPass2::runOnModule</a> routine is as follows:</p>
<p>1) <a class="el" href="namespaceprevirt.html#ae387d49ac3e8487afc8b87285d1da16e">previrt::getExit</a> is called to create a failure function; the function called when the interface is violated.</p>
<p>2) Iterating over all of the functions in the Module, calling <a class="el" href="namespaceprevirt.html#a75239481fd58fa558c56341e2a05e36d">previrt::patternMatches</a> on each. If the function name is a pattern matching one of the interface hooks, a new function is created and <a class="el" href="namespaceprevirt.html#aee37016d902c9d97d8a06910a8ab7bda">previrt::watchFunction</a> is called with the newly created watch function, to enforce an interface as specified by the watch::proto::ActionTree protecting calls to the original function.</p>
<p>3) The process in step2 is repeated for aliased functions.</p>
<p>4) The newly created watch functions are added to the module.</p>
<p>The watch::proto::WatchInterface buffer contains a list of Hooks; whereas each hook is a pair of watch::proto::PatternExpr and watch::proto:ActionTree. The watch::proto::PatternExpr identifies the function that needs to be watched out, and the watch::proto::ActionTree defines the set of tests that need to be applied to implement the watch functions. </p>

<p>Definition at line <a class="el" href="_watch2_8cpp_source.html#l00985">985</a> of file <a class="el" href="_watch2_8cpp_source.html">Watch2.cpp</a>.</p>

<p>References <a class="el" href="_watch2_8cpp_source.html#l00249">previrt::WatchContext::addAllFunctions()</a>, <a class="el" href="_watch2_8cpp_source.html#l00083">previrt::WatchContext::added_functions</a>, <a class="el" href="_watch2_8cpp_source.html#l00871">previrt::getAliasedFunction()</a>, <a class="el" href="_watch2_8cpp_source.html#l00368">previrt::getExit()</a>, <a class="el" href="_watch2_8cpp_source.html#l00811">previrt::patternMatches()</a>, and <a class="el" href="namespaceprevirt.html#aee37016d902c9d97d8a06910a8ab7bda">previrt::watchFunction()</a>.</p>

</div>
</div>
<h2 class="groupheader">Member Data Documentation</h2>
<a class="anchor" id="a364130c83b836fa7353c631719500419"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool previrt::WatchPass2::allowLocal</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>If allowLocal is set, the local calls to the function (that is watched) are allowed. </p>

<p>Definition at line <a class="el" href="_watch2_8cpp_source.html#l00919">919</a> of file <a class="el" href="_watch2_8cpp_source.html">Watch2.cpp</a>.</p>

</div>
</div>
<a class="anchor" id="ade9b1f0414c7db1ed5f833c0424e5f69"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::string previrt::WatchPass2::failureName</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>name of failure function; The function called in case the interface is violated </p>

<p>Definition at line <a class="el" href="_watch2_8cpp_source.html#l00921">921</a> of file <a class="el" href="_watch2_8cpp_source.html">Watch2.cpp</a>.</p>

</div>
</div>
<a class="anchor" id="ac4a12e033df1a4de537a64d2fe0b3fcd"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool previrt::WatchPass2::fancy</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>If fancy is set; a fancy failure function is created; one that takes the function name and the arguments. </p>

<p>Definition at line <a class="el" href="_watch2_8cpp_source.html#l00917">917</a> of file <a class="el" href="_watch2_8cpp_source.html">Watch2.cpp</a>.</p>

</div>
</div>
<a class="anchor" id="afd52829f3aa30a9a5fb422d1875ae283"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">char previrt::WatchPass2::ID</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="_watch2_8cpp_source.html#l00923">923</a> of file <a class="el" href="_watch2_8cpp_source.html">Watch2.cpp</a>.</p>

</div>
</div>
<a class="anchor" id="ab4383e2e3ceb8af4d03321bdbbc225cc"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">watch::proto::WatchInterface previrt::WatchPass2::interface</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>The interface is an object that reads in a Google protocol buffer from a file interface defines the actions that need to be applied in order to create watch functions. </p>

<p>Definition at line <a class="el" href="_watch2_8cpp_source.html#l00915">915</a> of file <a class="el" href="_watch2_8cpp_source.html">Watch2.cpp</a>.</p>

</div>
</div>
<hr/>The documentation for this class was generated from the following file:<ul>
<li>C:/Users/Hashim/Dropbox/Occam 2.0/src/<a class="el" href="_watch2_8cpp_source.html">Watch2.cpp</a></li>
</ul>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Fri Sep 27 2013 00:22:31 for Occam - Application Specialization by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.5
</small></address>
</body>
</html>
